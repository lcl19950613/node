<!DOCTYPE html>
<html>
<head lang="Zh-en">
    <meta charset="UTF-8">
    <style>
       *{margin:0;padding:0;}
       div{ width:50px;height:50px; border-radius: 100%; background: red;text-align: center;line-height: 50px;margin-left:10px;margin-top: 10px;;
       color: #fff;}
    </style>
    <title>Promise在浏览器中的应用</title>
    <script>
      window.onload = function(){

          // 要取到行内样式，可以使用下面函数做到兼容
     /* var currentStyle = function(element){
          return element.currentStyle || document.defaultView.getComputedStyle(element, null);
      }*/

       //用回调的方式写的，回调是反人类的写法
        var oDiv = document.querySelectorAll('div');
        moveTo(oDiv[0],300,function(){
            moveTo(oDiv[1],300,function(){
                moveTo(oDiv[2],300,function(){
                    moveTo(oDiv[0],150,function(){
                        moveTo(oDiv[1],150,function(){
                            moveTo(oDiv[2],150,function(){
                                moveTo(oDiv[0],50,function(){
                                    moveTo(oDiv[1],50,function(){
                                        moveTo(oDiv[2],50,function(){

                                        })
                                    })
                                })
                            })
                        })
                    })
                })
            })
        });

        function moveTo( ball,distance,cb){
            ball.timer = setInterval(function(){
               var L = parseInt( ball.style.marginLeft );
               if( L==distance ){
                   cb&&cb();
                   clearInterval(ball.timer);
               }else{
                   if( L<distance ){
                       L++
                   }else{
                       L--
                   }
                   ball.style.marginLeft = L + 'px';
               }
            },13);
        }
      };
    </script>
</head>
<body>


  <!--div.left{wangying}+div.right{wangying}>ul>(li.item$$$*4>a)^div.test{wangying}-->

  <div  style="margin-left: 10px;">1</div>
  <div style="margin-left: 10px;">2</div>
  <div style="margin-left: 10px;">3</div>
</body>
</html>