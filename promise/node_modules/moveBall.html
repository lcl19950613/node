<!DOCTYPE html>
<html>
<head lang="Zh-en">
    <meta charset="UTF-8">
    <style>
       *{margin:0;padding:0;}
       div{ width:50px;height:50px; border-radius: 100%; background: red;text-align: center;line-height: 50px;margin-left:10px;margin-top: 10px;;
       color: #fff;}
    </style>
    <title>Promise 在浏览器中的应用</title>
    <script>
      window.onload = function(){

          // 要取到行内样式，可以使用下面函数做到兼容
     /* var currentStyle = function(element){
          return element.currentStyle || document.defaultView.getComputedStyle(element, null);
      }*/

        var oDiv = document.querySelectorAll('div');

        moveTo(oDiv[0],100,function(){
            moveTo(oDiv[1],100,function(){
                moveTo(oDiv[2],100,function(){
                    moveTo(oDiv[0],50,function(){
                        moveTo(oDiv[1],50,function(){
                            moveTo(oDiv[2],50,function(){
                               alert(11)
                            })
                        })
                    })
                })
            })
        });

        function moveTo( ball,distance,cb){
            setInterval(function(){
               var L = parseInt( ball.style.marginLeft );
               if( L==distance ){
                   cb&&cb()
               }else{
                   if( L<distance ){
                       L++
                   }else{
                       L--
                   }
                   ball.style.marginLeft = L + 'px';
               }
            },13);
        }
      };
    </script>
</head>
<body>

  <div  style="margin-left: 10px;">1</div>
  <div style="margin-left: 10px;">2</div>
  <div style="margin-left: 10px;">3</div>
</body>
</html>